<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Advanced A.I. SEO Analyzer</title>
  <style>
    /* Modern, sleek styling */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      background: #f0f2f5;
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      color: #333;
    }
    header {
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: #fff;
    }
    .nav-left a {
      background: rgba(255, 255, 255, 0.2);
      padding: 8px 12px;
      border-radius: 4px;
      transition: background 0.3s ease;
      font-size: 0.95em;
    }
    .nav-left a:hover {
      background: rgba(255, 255, 255, 0.4);
    }
    .header-center {
      text-align: center;
      flex-grow: 1;
    }
    .header-center h1 {
      margin: 0;
      font-size: 2.5em;
      font-weight: 500;
    }
    .header-center p {
      margin: 5px 0 0;
      font-size: 1em;
      opacity: 0.9;
    }
    .container {
      max-width: 900px;
      margin: 30px auto;
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .input-group {
      margin-bottom: 20px;
    }
    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }
    .input-group select,
    .input-group textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }
    .input-group select:focus,
    .input-group textarea:focus {
      outline: none;
      border-color: #1e3c72;
    }
    button {
      background-color: #1e3c72;
      color: #fff;
      border: none;
      padding: 15px;
      width: 100%;
      border-radius: 4px;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.3s ease;
      margin-top: 10px;
    }
    button:hover {
      background-color: #16335c;
    }
    .analysis {
      margin-top: 30px;
    }
    .result-section {
      margin-bottom: 30px;
    }
    .result-section h2 {
      margin-bottom: 10px;
      padding-bottom: 5px;
      border-bottom: 1px solid #ddd;
      font-weight: 600;
    }
    .result-section p,
    .result-section li {
      line-height: 1.6;
    }
    .highlight {
      background-color: #ffeb3b;
      padding: 2px 4px;
      border-radius: 3px;
      cursor: help;
    }
    .results-box {
      background: #f7f7f7;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-top: 10px;
      font-family: Consolas, monospace;
      white-space: pre-wrap;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid #ddd;
    }
    th, td {
      padding: 10px;
      text-align: left;
      font-size: 0.95em;
    }
    th {
      background-color: #f9f9f9;
      font-weight: 600;
    }
    /* Conditional coloring for table cells will be applied inline */
    .info {
      background: #eef2f7;
      border: 1px solid #ccd4db;
      border-radius: 4px;
      padding: 15px;
      margin-top: 30px;
      font-size: 0.95em;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <header>
    <div class="nav-left">
      <a href="index.html">&larr; Return Home</a>
    </div>
    <div class="header-center">
      <h1>Advanced A.I. SEO Analyzer</h1>
      <p>Professional analysis for cutting-edge SEO performance</p>
    </div>
    <div style="width: 150px;"></div>
  </header>
  
  <div class="container">
    <!-- Niche Dropdown (Required) -->
    <div class="input-group">
      <label for="niche">Your Niche: <span style="color:red;">*</span></label>
      <select id="niche" required>
        <option value="">-- Select Your Niche --</option>
        <option value="tech">Tech</option>
        <option value="sustainability">Sustainability</option>
        <option value="finance">Finance</option>
        <option value="health">Health</option>
        <option value="travel">Travel</option>
        <option value="education">Education</option>
        <option value="fashion">Fashion</option>
        <option value="food">Food</option>
        <option value="real estate">Real Estate</option>
        <option value="entertainment">Entertainment</option>
        <option value="automotive">Automotive</option>
        <option value="sports">Sports</option>
        <option value="beauty">Beauty</option>
        <option value="retail">Retail</option>
        <option value="gaming">Gaming</option>
        <option value="lifestyle">Lifestyle</option>
        <option value="business">Business</option>
        <option value="legal">Legal</option>
        <option value="home improvement">Home Improvement</option>
        <option value="parenting">Parenting</option>
        <option value="marketing">Marketing</option>
        <option value="art & culture">Art & Culture</option>
      </select>
    </div>
    
    <!-- Main Copy Input -->
    <div class="input-group">
      <label for="copy">Your Copy:</label>
      <textarea id="copy" rows="10" placeholder="Paste your text here..."></textarea>
    </div>
    
    <!-- Analyze Button -->
    <button id="analyzeBtn">Analyze SEO</button>
    
    <!-- Analysis Results -->
    <div id="results" class="analysis"></div>
    
    <!-- Info Section -->
    <div class="info">
      <h2>How It Works</h2>
      <p>
        This A.I.-powered SEO analyzer evaluates your text by highlighting overused SEO keywords and detecting niche-specific keywords.
        It ignores common stopwords to prevent noise in the analysis. For each keyword, it checks if it belongs to your chosen niche,
        a different niche, or if it is unknown—attempting to classify it automatically with a confidence score. The table below is color-coded:
      </p>
      <ul>
        <li><strong>Niche Column:</strong> Displays the keyword’s associated niche, with a background color assigned to that niche.</li>
        <li><strong>Occurrences Column:</strong> Cell color reflects frequency relative to total words (Green: low, Yellow: medium, Red: high).</li>
        <li><strong>Certainty Column:</strong> Shows "100%" if the keyword is confirmed for your niche, or "Different Niche" if it belongs elsewhere.
          For guessed keywords that match your niche, a confidence percentage is shown (color-coded: Green for high, Yellow for medium, Red for low).
        </li>
      </ul>
    </div>
  </div>
  
  <script>
    /************************************************
     *        Overused SEO Keywords (Highlight)     *
     ************************************************/
    const overusedWords = [
      "best", "top", "quality", "expert", "affordable", "solution", "unique", "leading", 
      "powerful", "reliable", "trusted", "proven", "innovative", "cutting-edge", 
      "state-of-the-art", "free", "guaranteed", "amazing", "ultimate", "essential", 
      "premium", "efficient", "advanced", "strategic", "professional", "dynamic", 
      "holistic", "comprehensive", "optimal", "incredible", "remarkable"
    ];
    
    /************************************************
     *           Stopwords / Ignore List            *
     ************************************************/
    const ignoreWords = [
      "a", "an", "and", "all", "as", "at", "but", "by", "do", "don", "don't", "for", "if", "in", "is", "it", "of", "on", "or", "so", "the", "this", "to", "too", "while", "with", "there", "every"
      // You can expand this list with more common English stopwords as needed.
    ];
    
    /************************************************
     *       Niche Mapping and Known Keywords       *
     ************************************************/
    const nicheMapping = {
      "tech": [
        "ai", "machine", "learning", "technology", "tech", "robotics", "data", "science", 
        "innovation", "software", "hardware", "cybersecurity", "gadgets", "iot", 
        "cloud", "big", "automation"
      ],
      "sustainability": [
        "nature", "recycling", "reuse", "sustainable", "environment", "green", "eco", 
        "renewable", "conservation", "organic", "biodiversity", "carbon", "footprint", 
        "waste", "management"
      ],
      "finance": [
        "investment", "stocks", "cryptocurrency", "banking", "loans", "finance", "trading", 
        "financial", "planning", "wealth", "insurance", "budget", "economics", 
        "interest", "rates", "savings", "tax", "dividends", "portfolio", "retirement"
      ],
      "health": [
        "health", "wellness", "nutrition", "fitness", "exercise", "medicine", "mental", 
        "medical", "diet", "treatment", "prevention", "wellbeing", "therapy", "healthcare", 
        "doctor", "clinic"
      ],
      "travel": [
        "travel", "vacation", "tourism", "destination", "holiday", "flight", "hotel", 
        "adventure", "explore", "journey", "itinerary", "cruise", "sightseeing", 
        "backpacking", "road", "trip"
      ],
      "education": [
        "education", "learning", "courses", "classes", "tutoring", "scholarship", 
        "university", "college", "academic", "research", "training", "e-learning", 
        "study", "curriculum"
      ],
      "fashion": [
        "fashion", "style", "trends", "apparel", "clothing", "accessories", "couture", 
        "designer", "runway", "vintage", "moda", "outfit", "wardrobe", "glamour", "chic"
      ],
      "food": [
        "food", "cuisine", "recipe", "dining", "restaurant", "gourmet", "chef", "cooking", 
        "meal", "snack", "flavor", "organic", "fast", "bakery", "delicious", "savory"
      ],
      "real estate": [
        "real", "estate", "property", "homes", "housing", "mortgage", "apartment", 
        "commercial", "condo", "residential", "rentals", "market", "construction"
      ],
      "entertainment": [
        "entertainment", "movies", "music", "celebrity", "tv", "film", "concert", 
        "streaming", "theater", "festival", "pop", "culture", "blockbuster", "award", 
        "drama", "comedy"
      ],
      "automotive": [
        "automotive", "cars", "vehicles", "auto", "transportation", "engine", "dealership", 
        "electric", "hybrid", "suv", "sedan", "trucks", "performance", "motor", "driving"
      ],
      "sports": [
        "sports", "football", "basketball", "soccer", "baseball", "tennis", "athlete", 
        "tournament", "game", "league", "score", "coach", "stadium", "olympics", 
        "competition"
      ],
      "beauty": [
        "beauty", "skincare", "makeup", "cosmetics", "hair", "spa", "salon", "anti-aging", 
        "fragrance", "esthetic", "organic", "glam", "chic"
      ],
      "retail": [
        "retail", "shopping", "e-commerce", "store", "discount", "sale", "deal", "consumer", 
        "online", "delivery", "customer", "service", "brand", "merchandise"
      ],
      "gaming": [
        "gaming", "video", "games", "esports", "console", "pc", "multiplayer", "rpg", 
        "fps", "strategy", "gameplay", "virtual", "tournament", "beta"
      ],
      "lifestyle": [
        "lifestyle", "culture", "living", "home", "decor", "diy", "personal", "development", 
        "hobbies", "mindfulness", "fitness", "art", "entertainment"
      ],
      "business": [
        "business", "entrepreneur", "startup", "management", "leadership", "strategy", 
        "growth", "marketing", "sales", "operations", "corporate", "b2b", "b2c", "industry"
      ],
      "legal": [
        "legal", "law", "attorney", "lawsuit", "regulation", "compliance", "court", 
        "contract", "litigation", "policy", "rights", "justice", "criminal", "civil"
      ],
      "home improvement": [
        "home", "improvement", "diy", "renovation", "remodel", "construction", 
        "interior", "exterior", "maintenance", "repair", "architecture", "landscaping", 
        "decor"
      ],
      "parenting": [
        "parenting", "kids", "children", "family", "mom", "dad", "parent", "childcare", 
        "baby", "toddler", "advice", "support", "growth"
      ],
      "marketing": [
        "marketing", "advertising", "branding", "content", "social", "media", "seo", 
        "analytics", "campaign", "digital", "inbound", "engagement", "influencer", 
        "lead", "generation"
      ],
      "art & culture": [
        "art", "culture", "gallery", "exhibition", "artist", "creative", "design", 
        "museum", "craft", "sculpture", "painting", "installation", "performance", "curator"
      ]
    };
    
    /************************************************
     *            Niche Colors for Table            *
     ************************************************/
    const nicheColors = {
      "tech": "#d1ecf1",
      "sustainability": "#d4edda",
      "finance": "#fff3cd",
      "health": "#f8d7da",
      "travel": "#cce5ff",
      "education": "#e2e3e5",
      "fashion": "#f5dbf5",
      "food": "#ffeed4",
      "real estate": "#e6e6e6",
      "entertainment": "#ececff",
      "automotive": "#e4fcef",
      "sports": "#f0e6ff",
      "beauty": "#ffe6f2",
      "retail": "#e6fff5",
      "gaming": "#ffe6cc",
      "lifestyle": "#f4f4f4",
      "business": "#ddefef",
      "legal": "#e7e7e7",
      "home improvement": "#f9f6e8",
      "parenting": "#fde8e8",
      "marketing": "#f0ffe4",
      "art & culture": "#fffae6"
    };
    
    /************************************************
     *    Build a Quick-Look Dictionary (lowercase) *
     ************************************************/
    const knownKeywords = {};
    for (const niche in nicheMapping) {
      nicheMapping[niche].forEach(keyword => {
        const lowerKey = keyword.toLowerCase();
        if (!knownKeywords[lowerKey]) {
          knownKeywords[lowerKey] = niche;
        }
      });
    }
    
    /************************************************
     *    Text Normalization / Word Frequency       *
     ************************************************/
    function normalizeWord(word) {
      return word.replace(/[^a-zA-Z0-9]/g, "").toLowerCase();
    }
    
    function getWordFrequencies(text) {
      const freqMap = {};
      const rawWords = text.split(/\s+/);
      for (let raw of rawWords) {
        const w = normalizeWord(raw);
        if (w) {
          freqMap[w] = (freqMap[w] || 0) + 1;
        }
      }
      return freqMap;
    }
    
    /************************************************
     *    Guess Niche for Unknown Keyword           *
     ************************************************/
    function guessNiche(word) {
      let bestScore = 0;
      let bestNiche = null;
      const wLower = word.toLowerCase();
      
      for (const knownWord in knownKeywords) {
        const niche = knownKeywords[knownWord];
        const score = similarity(wLower, knownWord);
        if (score > bestScore) {
          bestScore = score;
          bestNiche = niche;
        }
      }
      
      if (bestScore < 0.3) {
        return null;
      }
      const confidence = Math.floor(bestScore * 100);
      return { niche: bestNiche, confidence };
    }
    
    function similarity(a, b) {
      let matches = 0;
      const len = Math.min(a.length, b.length);
      for (let i = 0; i < len; i++) {
        if (a[i] === b[i]) {
          matches++;
        }
      }
      return matches / Math.max(a.length, b.length);
    }
    
    /************************************************
     *   Color Helper for Occurrences and Certainty  *
     ************************************************/
    function getColorForNiche(niche) {
      if (!niche) return "#ffffff";
      const nicheLower = niche.toLowerCase();
      return nicheColors[nicheLower] || "#ffffff";
    }
    
    function getOccurrencesColor(ratio) {
      if (ratio > 0.1) {
        return "#ffcccc"; // high → red
      } else if (ratio > 0.05) {
        return "#fff5cc"; // medium → yellow
      } else {
        return "#ccffcc"; // low → green
      }
    }
    
    function getCertaintyColor(certainty) {
      if (typeof certainty === "number") {
        if (certainty >= 70) {
          return "#ccffcc"; // high (green)
        } else if (certainty >= 40) {
          return "#fff5cc"; // medium (yellow)
        } else {
          return "#ffcccc"; // low (red)
        }
      }
      // For non-numeric certainty (e.g., "Different Niche")
      return "#ffcccc"; // red-ish
    }
    
    document.getElementById('analyzeBtn').addEventListener('click', function() {
      const inputNiche = document.getElementById('niche').value.trim();
      const copy = document.getElementById('copy').value;
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = "";
      
      if (!inputNiche) {
        resultsDiv.innerHTML = '<p style="color:red;">Please select your niche to proceed.</p>';
        return;
      }
      if (!copy) {
        resultsDiv.innerHTML = '<p>Please enter some copy to analyze.</p>';
        return;
      }
      
      /***********************************************
       * 1) Highlight Overused SEO Keywords in Copy  *
       ***********************************************/
      const overusedRegex = new RegExp('\\b(' + overusedWords.join('|') + ')\\b', 'gi');
      const highlightedCopy = copy.replace(overusedRegex, function(match) {
        return '<span class="highlight" title="This term may be overused in SEO. Consider using synonyms.">' + match + '</span>';
      });
      
      /***********************************************
       * 2) Build Word Frequency for the Copy        *
       ***********************************************/
      const freqMap = getWordFrequencies(copy);
      const totalWordsCount = Object.values(freqMap).reduce((a, b) => a + b, 0);
      
      /***********************************************
       * 3) Analyze Niche Keywords & Potential KW    *
       ***********************************************/
      const foundKeywords = [];
      const inputNicheLower = inputNiche.toLowerCase();
      
      for (const word in freqMap) {
        const occurrences = freqMap[word];
        if (ignoreWords.includes(word)) {
          continue;
        }
        
        if (knownKeywords[word]) {
          const knownNiche = knownKeywords[word];
          let certaintyDisplay = "";
          if (knownNiche.toLowerCase() === inputNicheLower) {
            certaintyDisplay = "100%";
          } else {
            certaintyDisplay = "Different Niche";
          }
          foundKeywords.push({
            niche: knownNiche,
            keyword: word,
            occurrences,
            certainty: certaintyDisplay
          });
        } else {
          const guess = guessNiche(word);
          if (guess) {
            let certaintyDisplay = "";
            if (guess.niche.toLowerCase() === inputNicheLower) {
              certaintyDisplay = guess.confidence + "%";
            } else {
              certaintyDisplay = "Different Niche";
            }
            foundKeywords.push({
              niche: "Guessed: " + guess.niche,
              keyword: word,
              occurrences,
              certainty: certaintyDisplay
            });
          }
        }
      }
      
      foundKeywords.sort((a, b) => {
        if (a.niche < b.niche) return -1;
        if (a.niche > b.niche) return 1;
        if (a.keyword < b.keyword) return -1;
        if (a.keyword > b.keyword) return 1;
        return 0;
      });
      
      /***********************************************
       * 4) Overused Keywords Analysis              *
       ***********************************************/
      const overusedCounts = {};
      overusedWords.forEach(word => {
        const regex = new RegExp('\\b' + word + '\\b', 'gi');
        const matches = copy.match(regex);
        overusedCounts[word] = matches ? matches.length : 0;
      });
      
      let overusedHTML = '<div class="result-section"><h2>Overused SEO Keywords Analysis</h2><ul>';
      let foundOverused = false;
      for (const [word, count] of Object.entries(overusedCounts)) {
        if (count > 0) {
          foundOverused = true;
          overusedHTML += '<li><strong>' + word + '</strong>: ' + count + ' occurrence' + (count > 1 ? 's' : '') + '</li>';
        }
      }
      overusedHTML += '</ul>';
      if (!foundOverused) {
        overusedHTML += '<p>No overused SEO keywords were detected in your copy!</p>';
      } else {
        overusedHTML += '<p>Review the highlighted terms above; consider using synonyms for a more natural language flow.</p>';
      }
      overusedHTML += '</div>';
      
      /***********************************************
       * 5) Copy Analysis Section (word count, etc.) *
       ***********************************************/
      let analysisHTML = '<div class="result-section"><h2>Copy Analysis</h2>';
      analysisHTML += '<p>Total word count: ' + totalWordsCount + '</p>';
      analysisHTML += '<p>Highlighted copy with potential overused terms:</p>';
      analysisHTML += '<div class="results-box">' + highlightedCopy + '</div>';
      analysisHTML += '</div>';
      
      /***********************************************
       * 6) Build the Niche Keywords Table           *
       ***********************************************/
      let nicheAnalysisHTML = '<div class="result-section"><h2>Niche Keywords Analysis</h2>';
      if (foundKeywords.length === 0) {
        nicheAnalysisHTML += '<p>No niche-related or potential keywords were detected (or all were ignored stopwords).</p></div>';
      } else {
        nicheAnalysisHTML += '<table><tr><th>Niche</th><th>Keyword</th><th>Occurrences</th><th>Certainty</th></tr>';
        foundKeywords.forEach(item => {
          let displayNiche = item.niche;
          let rawNiche = displayNiche.toLowerCase();
          if (displayNiche.toLowerCase().startsWith("guessed: ")) {
            rawNiche = displayNiche.replace(/guessed:\s*/i, "").toLowerCase();
          }
          const nicheColor = getColorForNiche(rawNiche);
          const ratio = item.occurrences / totalWordsCount;
          const occColor = getOccurrencesColor(ratio);
          const certColor = getCertaintyColor(
            typeof item.certainty === "number" ? item.certainty : 0
          );
          
          nicheAnalysisHTML += `
            <tr>
              <td style="background-color:${nicheColor};">${displayNiche}</td>
              <td>${item.keyword}</td>
              <td style="background-color:${occColor};">${item.occurrences}</td>
              <td style="background-color:${certColor};">${item.certainty}</td>
            </tr>`;
        });
        nicheAnalysisHTML += '</table></div>';
      }
      
      /***********************************************
       * 7) Combine and Display Results              *
       ***********************************************/
      resultsDiv.innerHTML = analysisHTML + nicheAnalysisHTML + overusedHTML;
    });
  </script>
</body>
</html>
