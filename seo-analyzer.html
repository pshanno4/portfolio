<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Advanced A.I. SEO Analyzer</title>
  <style>
    /* Global Styles */
    body {
      margin: 0;
      padding: 0;
      background-color: #f8f9fa;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
    }
    a {
      text-decoration: none;
      color: inherit;
    }
    /* Header Navigation */
    header {
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: #fff;
    }
    .nav-left {
      font-size: 1em;
    }
    .nav-left a {
      background: rgba(255, 255, 255, 0.2);
      padding: 8px 12px;
      border-radius: 4px;
      transition: background 0.3s ease;
    }
    .nav-left a:hover {
      background: rgba(255, 255, 255, 0.4);
    }
    .header-center {
      text-align: center;
      flex-grow: 1;
    }
    .header-center h1 {
      margin: 0;
      font-size: 2.5em;
    }
    .header-center p {
      margin: 5px 0 0;
      font-size: 1.1em;
      opacity: 0.9;
    }
    /* Container */
    .container {
      max-width: 900px;
      margin: 30px auto;
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .input-group {
      margin-bottom: 20px;
    }
    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }
    .input-group input,
    .input-group textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
    }
    button {
      background-color: #1e3c72;
      color: #fff;
      border: none;
      padding: 15px;
      width: 100%;
      border-radius: 4px;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background-color: #16335c;
    }
    .analysis {
      margin-top: 30px;
    }
    .result-section {
      margin-bottom: 30px;
    }
    .result-section h2 {
      margin-bottom: 10px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
    }
    .result-section p,
    .result-section li {
      line-height: 1.6;
    }
    .highlight {
      background-color: #ffeb3b;
      padding: 2px 4px;
      border-radius: 3px;
      cursor: help;
    }
    .results-box {
      background: #f1f1f1;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-top: 10px;
      font-family: Consolas, monospace;
      white-space: pre-wrap;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #f9f9f9;
    }
    /* Info Section */
    .info {
      background: #eef2f7;
      border: 1px solid #ccd4db;
      border-radius: 4px;
      padding: 15px;
      margin-top: 30px;
      font-size: 0.95em;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <header>
    <div class="nav-left">
      <a href="index.html">&larr; Return Home</a>
    </div>
    <div class="header-center">
      <h1>Advanced A.I. SEO Analyzer</h1>
      <p>Professional analysis for cutting-edge SEO performance</p>
    </div>
    <!-- Placeholder for possible right-side content -->
    <div style="width: 150px;"></div>
  </header>
  
  <div class="container">
    <!-- Required Niche Input -->
    <div class="input-group">
      <label for="niche">Your Niche: <span style="color:red;">*</span></label>
      <input type="text" id="niche" placeholder="e.g. Tech, Sustainability, Finance, Health..." required>
    </div>
    
    <!-- Main Copy Input -->
    <div class="input-group">
      <label for="copy">Your Copy:</label>
      <textarea id="copy" rows="10" placeholder="Paste your text here..."></textarea>
    </div>
    
    <!-- Analyze Button -->
    <button id="analyzeBtn">Analyze SEO</button>
    
    <!-- Analysis Results -->
    <div id="results" class="analysis"></div>
    
    <!-- Info Section -->
    <div class="info">
      <h2>How It Works</h2>
      <p>
        This A.I.-powered SEO analyzer evaluates your text by checking for overused SEO keywords and assessing the relevance of niche-specific keywords.
        You must provide your target niche, which is then used to filter and assign a certainty score for keywords detected in your copy.
        <br><br>
        - <strong>Overused Keywords:</strong> We highlight potential overused words so you can replace them with synonyms. <br>
        - <strong>Niche Keywords Analysis:</strong> We look for known keywords associated with your niche. If we see keywords from other niches, we assign them a <em>“not associated”</em> certainty value (making it clear they belong to a different niche). <br>
        - <strong>Potential Keywords:</strong> If we encounter words not in our database, we attempt to guess their niche using a basic text similarity approach. We then provide a confidence score for how likely that guess is correct.
      </p>
    </div>
  </div>
  
  <script>
    /************************************************
     *        Overused SEO Keywords (Highlight)     *
     ************************************************/
    const overusedWords = [
      "best", "top", "quality", "expert", "affordable", "solution", "unique", "leading", 
      "powerful", "reliable", "trusted", "proven", "innovative", "cutting-edge", 
      "state-of-the-art", "free", "guaranteed", "amazing", "ultimate", "essential", 
      "premium", "efficient", "advanced", "strategic", "professional", "dynamic", 
      "holistic", "comprehensive", "optimal", "incredible", "remarkable"
    ];
    
    /************************************************
     *       Niche Mapping and Known Keywords       *
     ************************************************/
    const nicheMapping = {
      "tech": [
        "AI", "machine", "learning", "technology", "tech", "robotics", "data", "science", 
        "innovation", "software", "hardware", "cybersecurity", "gadgets", "iot", 
        "cloud", "big", "automation"
      ],
      "sustainability": [
        "nature", "recycling", "reuse", "sustainable", "environment", "green", "eco", 
        "renewable", "conservation", "organic", "biodiversity", "carbon", "footprint", 
        "waste", "management"
      ],
      "finance": [
        "investment", "stocks", "cryptocurrency", "banking", "loans", "finance", "trading", 
        "financial", "planning", "wealth", "management", "insurance", "budget", "economics", 
        "interest", "rates", "savings", "tax", "dividends", "portfolio", "retirement"
      ],
      "health": [
        "health", "wellness", "nutrition", "fitness", "exercise", "medicine", "mental", 
        "medical", "diet", "treatment", "prevention", "wellbeing", "therapy", "healthcare", 
        "doctor", "clinic"
      ],
      "travel": [
        "travel", "vacation", "tourism", "destination", "holiday", "flight", "hotel", 
        "adventure", "explore", "journey", "itinerary", "cruise", "sightseeing", 
        "backpacking", "road", "trip"
      ],
      "education": [
        "education", "learning", "courses", "classes", "tutoring", "scholarship", 
        "university", "college", "academic", "research", "training", "e-learning", 
        "study", "curriculum"
      ],
      "fashion": [
        "fashion", "style", "trends", "apparel", "clothing", "accessories", "couture", 
        "designer", "runway", "vintage", "moda", "outfit", "wardrobe", "glamour", "chic"
      ],
      "food": [
        "food", "cuisine", "recipe", "dining", "restaurant", "gourmet", "chef", "cooking", 
        "meal", "snack", "flavor", "organic", "fast", "bakery", "delicious", "savory"
      ],
      "real estate": [
        "real", "estate", "property", "homes", "housing", "mortgage", "apartment", 
        "commercial", "condo", "residential", "rentals", "market", "construction"
      ],
      "entertainment": [
        "entertainment", "movies", "music", "celebrity", "tv", "film", "concert", 
        "streaming", "theater", "festival", "pop", "culture", "blockbuster", "award", 
        "drama", "comedy"
      ],
      "automotive": [
        "automotive", "cars", "vehicles", "auto", "transportation", "engine", "dealership", 
        "electric", "hybrid", "suv", "sedan", "trucks", "performance", "motor", "driving"
      ],
      "sports": [
        "sports", "football", "basketball", "soccer", "baseball", "tennis", "athlete", 
        "tournament", "game", "league", "score", "coach", "stadium", "olympics", 
        "competition"
      ],
      "beauty": [
        "beauty", "skincare", "makeup", "cosmetics", "hair", "spa", "salon", "anti-aging", 
        "fragrance", "esthetic", "organic", "glam", "chic"
      ],
      "retail": [
        "retail", "shopping", "e-commerce", "store", "discount", "sale", "deal", "consumer", 
        "online", "delivery", "customer", "service", "brand", "merchandise"
      ],
      "gaming": [
        "gaming", "video", "games", "esports", "console", "pc", "multiplayer", "rpg", 
        "fps", "strategy", "gameplay", "virtual", "tournament", "beta"
      ],
      "lifestyle": [
        "lifestyle", "culture", "living", "home", "decor", "diy", "personal", "development", 
        "hobbies", "mindfulness", "fitness", "art", "entertainment"
      ],
      "business": [
        "business", "entrepreneur", "startup", "management", "leadership", "strategy", 
        "growth", "marketing", "sales", "operations", "corporate", "b2b", "b2c", "industry"
      ],
      "legal": [
        "legal", "law", "attorney", "lawsuit", "regulation", "compliance", "court", 
        "contract", "litigation", "policy", "rights", "justice", "criminal", "civil"
      ],
      "home improvement": [
        "home", "improvement", "diy", "renovation", "remodel", "construction", 
        "interior", "exterior", "maintenance", "repair", "architecture", "landscaping", 
        "decor"
      ],
      "parenting": [
        "parenting", "kids", "children", "family", "mom", "dad", "parent", "childcare", 
        "baby", "toddler", "advice", "support", "growth"
      ],
      "marketing": [
        "marketing", "advertising", "branding", "content", "social", "media", "seo", 
        "analytics", "campaign", "digital", "inbound", "engagement", "influencer", 
        "lead", "generation"
      ],
      "art & culture": [
        "art", "culture", "gallery", "exhibition", "artist", "creative", "design", 
        "museum", "craft", "sculpture", "painting", "installation", "performance", "curator"
      ]
    };
    
    /************************************************
     *            Niche Colors for Table Rows       *
     ************************************************/
    const nicheColors = {
      "tech": "#d1ecf1",
      "sustainability": "#d4edda",
      "finance": "#fff3cd",
      "health": "#f8d7da",
      "travel": "#cce5ff",
      "education": "#e2e3e5",
      "fashion": "#f5dbf5",
      "food": "#ffeed4",
      "real estate": "#e6e6e6",
      "entertainment": "#ececff",
      "automotive": "#e4fcef",
      "sports": "#f0e6ff",
      "beauty": "#ffe6f2",
      "retail": "#e6fff5",
      "gaming": "#ffe6cc",
      "lifestyle": "#f4f4f4",
      "business": "#ddefef",
      "legal": "#e7e7e7",
      "home improvement": "#f9f6e8",
      "parenting": "#fde8e8",
      "marketing": "#f0ffe4",
      "art & culture": "#fffae6"
    };
    
    /************************************************
     *    Build a Quick-Look Dictionary (lowercase) *
     ************************************************/
    // knownKeywords[word] = niche
    const knownKeywords = {};
    for (const niche in nicheMapping) {
      nicheMapping[niche].forEach(keyword => {
        const lowerKey = keyword.toLowerCase();
        if (!knownKeywords[lowerKey]) {
          knownKeywords[lowerKey] = niche;
        }
      });
    }
    
    /************************************************
     *    Text Normalization / Word Frequency       *
     ************************************************/
    function normalizeWord(word) {
      // Remove most punctuation, keep letters/numbers
      // E.g. "A.I." => "AI", "footprint," => "footprint"
      return word.replace(/[^a-zA-Z0-9]/g, "").toLowerCase();
    }
    
    function getWordFrequencies(text) {
      const freqMap = {};
      const rawWords = text.split(/\s+/);
      for (let raw of rawWords) {
        const w = normalizeWord(raw);
        if (w) {
          if (!freqMap[w]) freqMap[w] = 0;
          freqMap[w]++;
        }
      }
      return freqMap;
    }
    
    /************************************************
     *    Guess Niche for Unknown Keyword           *
     ************************************************/
    function guessNiche(word) {
      // A naive approach: find the best partial match with known keywords
      // Then use that match to guess the niche. We measure similarity
      // by substring overlap or naive ratio.
      let bestScore = 0;
      let bestNiche = null;
      const wLower = word.toLowerCase();
      
      // Compare with each known keyword in knownKeywords
      for (const kw in knownKeywords) {
        const niche = knownKeywords[kw];
        const score = similarity(wLower, kw); 
        if (score > bestScore) {
          bestScore = score;
          bestNiche = niche;
        }
      }
      
      // If bestScore is too low, we consider it unassignable
      if (bestScore < 0.3) {
        return null;
      }
      // Confidence as an integer percentage
      const confidence = Math.floor(bestScore * 100);
      return { niche: bestNiche, confidence };
    }
    
    // Very simple similarity function:
    // returns ratio of matched characters at the same index
    // to the max length of the two strings
    function similarity(a, b) {
      let matches = 0;
      const len = Math.min(a.length, b.length);
      for (let i = 0; i < len; i++) {
        if (a[i] === b[i]) {
          matches++;
        }
      }
      return matches / Math.max(a.length, b.length);
    }
    
    /************************************************
     *           Color Helper for Table Rows        *
     ************************************************/
    function getColorForNiche(niche) {
      if (!niche) return "#ffffff";
      // If niche color is known:
      const nicheLower = niche.toLowerCase();
      if (nicheColors[nicheLower]) {
        return nicheColors[nicheLower];
      }
      // Fallback color if not in dictionary
      return "#ffffff";
    }
    
    /************************************************
     *              Main Analysis Logic             *
     ************************************************/
    document.getElementById('analyzeBtn').addEventListener('click', function() {
      const inputNiche = document.getElementById('niche').value.trim();
      const copy = document.getElementById('copy').value;
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = "";
      
      // Validate that niche is provided.
      if (!inputNiche) {
        resultsDiv.innerHTML = '<p style="color:red;">Please enter your niche to proceed.</p>';
        return;
      }
      if (!copy) {
        resultsDiv.innerHTML = '<p>Please enter some copy to analyze.</p>';
        return;
      }
      
      /***********************************************
       * 1) Highlight Overused SEO Keywords in Copy  *
       ***********************************************/
      const overusedRegex = new RegExp('\\b(' + overusedWords.join('|') + ')\\b', 'gi');
      const highlightedCopy = copy.replace(overusedRegex, function(match) {
        return '<span class="highlight" title="This term may be overused in SEO. Consider using synonyms.">' + match + '</span>';
      });
      
      /***********************************************
       * 2) Build Word Frequency for the Copy        *
       ***********************************************/
      const freqMap = getWordFrequencies(copy);
      
      /***********************************************
       * 3) Analyze Niche Keywords & Potential KW    *
       ***********************************************/
      // We'll create an array of { niche, keyword, occurrences, certainty }
      const foundKeywords = [];
      
      // For each distinct word in freqMap, decide if it's a known keyword or guess a niche
      for (const word in freqMap) {
        const occurrences = freqMap[word];
        
        // If this is a known keyword in our dictionary:
        if (knownKeywords[word]) {
          const nicheFound = knownKeywords[word];
          // If it matches the user's niche (exact match ignoring case), 100%
          // Else, we set it to 0% to indicate it's from a different niche
          const certainty = (nicheFound.toLowerCase() === inputNiche.toLowerCase()) ? 100 : 0;
          foundKeywords.push({
            niche: nicheFound,
            keyword: word,
            occurrences,
            certainty
          });
        } 
        else {
          // Try to guess a niche
          const guess = guessNiche(word);
          if (guess) {
            // If the guessed niche matches user input niche, we can keep guess.confidence
            // Otherwise, let's show it as the guess's confidence for that other niche
            // to illustrate the difference.
            let finalCertainty = guess.confidence;
            
            // If the guessed niche doesn't match the user's input niche, 
            // show it as "0% (Different Niche)" or something similarly obvious
            if (guess.niche.toLowerCase() !== inputNiche.toLowerCase()) {
              finalCertainty = 0; // clearly show it's not the user's niche
            }
            
            foundKeywords.push({
              niche: "Guessed: " + guess.niche,
              keyword: word,
              occurrences,
              certainty: finalCertainty
            });
          }
        }
      }
      
      // Sort found keywords for a cleaner table: by niche, then by keyword
      foundKeywords.sort((a, b) => {
        // Sort by niche (alphabetically), then by keyword
        if (a.niche < b.niche) return -1;
        if (a.niche > b.niche) return 1;
        if (a.keyword < b.keyword) return -1;
        if (a.keyword > b.keyword) return 1;
        return 0;
      });
      
      /***********************************************
       * 4) Overused Keywords Analysis              *
       ***********************************************/
      // Count each overused word's occurrences in the raw copy
      const overusedCounts = {};
      overusedWords.forEach(word => {
        const regex = new RegExp('\\b' + word + '\\b', 'gi');
        const matches = copy.match(regex);
        overusedCounts[word] = matches ? matches.length : 0;
      });
      
      let overusedHTML = '<div class="result-section"><h2>Overused SEO Keywords Analysis</h2><ul>';
      let foundOverused = false;
      for (const [word, count] of Object.entries(overusedCounts)) {
        if (count > 0) {
          foundOverused = true;
          overusedHTML += '<li><strong>' + word + '</strong>: ' + count + ' occurrence' + (count > 1 ? 's' : '') + '</li>';
        }
      }
      overusedHTML += '</ul>';
      if (!foundOverused) {
        overusedHTML += '<p>No overused SEO keywords were detected in your copy!</p>';
      } else {
        overusedHTML += '<p>Review the highlighted terms above; consider using synonyms for a more natural language flow.</p>';
      }
      overusedHTML += '</div>';
      
      /***********************************************
       * 5) Copy Analysis Section (word count, etc.) *
       ***********************************************/
      const totalWords = copy.match(/\w+/g)?.length || 0;
      let analysisHTML = '<div class="result-section"><h2>Copy Analysis</h2>';
      analysisHTML += '<p>Total word count: ' + totalWords + '</p>';
      analysisHTML += '<p>Highlighted copy with potential overused terms:</p>';
      analysisHTML += '<div class="results-box">' + highlightedCopy + '</div>';
      analysisHTML += '</div>';
      
      /***********************************************
       * 6) Build the Niche Keywords Table           *
       ***********************************************/
      let nicheAnalysisHTML = '<div class="result-section"><h2>Niche Keywords Analysis</h2>';
      if (foundKeywords.length === 0) {
        nicheAnalysisHTML += '<p>No niche-related or potential keywords were detected.</p></div>';
      } else {
        nicheAnalysisHTML += '<table><tr><th>Niche</th><th>Keyword</th><th>Occurrences</th><th>Certainty</th></tr>';
        foundKeywords.forEach(item => {
          // Determine row color based on the "primary" niche (if "Guessed:", split off)
          const nicheName = item.niche.toLowerCase().startsWith("guessed:") 
            ? item.niche.toLowerCase().replace("guessed: ", "").trim()
            : item.niche.toLowerCase();
          
          const rowColor = getColorForNiche(nicheName);
          
          nicheAnalysisHTML += `
            <tr style="background-color:${rowColor};">
              <td>${item.niche}</td>
              <td>${item.keyword}</td>
              <td>${item.occurrences}</td>
              <td>${item.certainty}%</td>
            </tr>`;
        });
        nicheAnalysisHTML += '</table></div>';
      }
      
      /***********************************************
       * 7) Combine and Display Results              *
       ***********************************************/
      resultsDiv.innerHTML = analysisHTML + nicheAnalysisHTML + overusedHTML;
    });
  </script>
</body>
</html>
